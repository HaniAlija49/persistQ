# Database (using custom name to avoid conflicts)
MEMORYHUB_DATABASE_URL="postgresql://user:password@host:port/database?sslmode=require"

# Environment
NODE_ENV="development"

# Upstash Redis for Rate Limiting (optional but recommended)
# Sign up at https://upstash.com and create a Redis database
# Rate limiting will be disabled if not configured
UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your_token_here"

# Clerk Authentication (for frontend integration)
# Get these from https://dashboard.clerk.com/last-active?path=api-keys
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_..."
CLERK_SECRET_KEY="sk_test_..."

# Clerk Webhook Secret (for user sync webhook)
# Get this from Clerk Dashboard > Webhooks after creating a webhook
CLERK_WEBHOOK_SECRET="whsec_..."

# CORS Configuration (for browser-based frontend access)
# Comma-separated list of allowed origins for API access
# IMPORTANT: MCP servers don't need CORS (server-to-server communication)
#
# Development (default if not set):
#   - http://localhost:3000, http://localhost:3001, http://127.0.0.1:3000, http://127.0.0.1:3001
#
# Production (set to your frontend domain):
#   - Example: ALLOWED_ORIGINS="https://yourapp.vercel.app,https://www.yourapp.com"
#
# Note: Do NOT use "*" in production for security
ALLOWED_ORIGINS=""

# Highlight.io Error Tracking & Observability
# Sign up at https://highlight.io and create a project
# Get your project ID from https://app.highlight.io/setup
# Optional but HIGHLY recommended for production monitoring
HIGHLIGHT_PROJECT_ID="your_project_id_here"

# ==============================================================================
# Billing Configuration (Dodo Payments)
# ==============================================================================

# Billing provider name (currently supports: "dodo")
# Change this to switch billing providers (e.g., "stripe" once implemented)
BILLING_PROVIDER="dodo"

# Dodo Payments API Key
# Get this from: https://dashboard.dodopayments.com -> Developer -> API Keys
DODO_API_KEY="your_dodo_api_key_here"

# Dodo Payments Webhook Secret
# Get this from: https://dashboard.dodopayments.com -> Developer -> Webhooks
# Create a webhook pointing to: https://your-domain.com/api/webhooks/billing/dodo
DODO_WEBHOOK_SECRET="your_dodo_webhook_secret_here"

# Dodo Payments Mode ("test" or "live")
# Use "test" for development and testing, "live" for production
DODO_MODE="test"

# Application public URL (used for billing redirects)
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# ==============================================================================
# BILLING SETUP NOTES:
# ==============================================================================
#
# 1. Dodo Payments Setup:
#    a. Sign up at https://dodopayments.com
#    b. Create products in Dodo dashboard for each plan:
#       - Starter Monthly & Starter Yearly
#       - Pro Monthly & Pro Yearly
#       - Premium Monthly & Premium Yearly
#    c. Copy the product IDs and update backend/config/plans.ts
#    d. Generate API key in Developer -> API Keys
#    e. Create webhook endpoint pointing to /api/webhooks/billing/dodo
#    f. Copy webhook secret and add to DODO_WEBHOOK_SECRET
#
# 2. Provider Switching:
#    To switch from Dodo to another provider (e.g., Stripe):
#    a. Change BILLING_PROVIDER="stripe"
#    b. Add provider-specific env vars (STRIPE_SECRET_KEY, etc.)
#    c. Implement provider class in backend/lib/billing/providers/stripe.ts
#    d. Update backend/lib/billing/factory.ts to handle new provider
#    e. Update backend/config/plans.ts with new provider product IDs
#
# 3. Testing:
#    - Always test in "test" mode before going live
#    - Use test checkout flows to verify webhook delivery
#    - Check that subscription data syncs correctly to database
#
